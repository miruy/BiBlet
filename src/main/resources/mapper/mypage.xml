<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yurim.www.repository.MypageDAO">
    <select id="myCommentForMypage" parameterType="Long" resultType="AppraisalDTO">
        SELECT bookshelf.isbn,
               appraisal.comment,
               appraisal.start_date,
               appraisal.end_date,
               appraisal.appraisal_no,
               appraisal.co_prv
        FROM appraisal
                 INNER JOIN bookshelf ON bookshelf.status_no = appraisal.status_no
        WHERE bookshelf.user_no = #{userNo} AND appraisal.comment IS NOT NULL
    </select>

    <select id="myEvaluateList" parameterType="Long" resultType="AppraisalDTO">
        SELECT appraisal.star,
               bookshelf.isbn
        FROM appraisal
            INNER JOIN bookshelf ON bookshelf.status_no = appraisal.status_no
        WHERE bookshelf.user_no = #{userNo} ORDER BY appraisal.appraisal_no DESC limit 5
    </select>

    <select id="mypage_1" parameterType="Long" resultType="String">
        SELECT isbn FROM bookshelf WHERE user_no = #{userNo} AND status = 0
    </select>

    <select id="mypage_2" parameterType="Long" resultType="String">
        SELECT isbn FROM bookshelf WHERE user_no = #{userNo} AND status = 1
    </select>

</mapper>